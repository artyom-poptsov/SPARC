\documentclass[a4paper,twoside]{book}

\emergencystretch=1em
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{fontspec}
\usepackage{graphicx}
\renewcommand{\thefigure}{\thesection.\arabic{figure}}
\usepackage{hyperref}
\usepackage{multirow}
\usepackage[absolute,overlay,showboxes]{textpos}
\usepackage{etoolbox}
\usepackage{longtable}
\usepackage{tikz}
\usepackage{lilyglyphs}
\usepackage{tabularx}
\usepackage{pgfplots}
\usepackage{circuitikz}
\usepackage{minted}
\usepackage{glossaries}
\usepackage{makeidx}
\usepackage{expl3}
\usepackage{chngcntr}
\usepackage{svg}
\usepackage{subfiles}
\usepackage[printonlyused,withpage]{acronym}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{references.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setmainfont{Liberation Serif}
\setmonofont{Liberation Mono}

\makeindex
\makeglossaries

\urlstyle{same}

\graphicspath{ {images/} {../../../images/} {../../../out/src/common/} }

\input{sections/commands.tex}
\input{common/figureSoundGraph.tex}
\input{common/figurePWMGraph.tex}
\input{common/figureADC.tex}
\input{common/figureAnalogSignalExample.tex}
\input{common/figureDigitalSignalExample.tex}
\input{src/common/figureBlinkinLEDGraph.tex}
\input{src/common/figureMusicSixBars.tex}
\input{common/figureMusicSixBarsFourFour.tex}
\input{common/figureMusicBarFourFour.tex}
\input{common/figureMusicBarFourFourWithFrequencies.tex}
\input{common/figureMusicWeWillRockYouSimplified.tex}
\input{common/tableTwoDimensionalArray.tex}
\input{common/tableMusicNoteLengths.tex}
\input{common/figureMusicTwinkleTwinkleLittleStar.tex}
\input{common/tableMusicTwinkleTwinkleLittleStar.tex}

\counterwithin{listing}{section}

\newgetenv[\REPRODUCIBILITY]{REPRODUCIBILITY}%
\newgetenv[\RANDOMSEED]{RANDOMSEED}

\ifdefstring{\REPRODUCIBILITY}{yes}{%
  \ifthenelse{\equal{\RANDOMSEED}{}}%
  {%
    \typeout{Setting the random seed to a fixed value.}%
    \pgfmathsetseed{\number42}%
  }{%
    \typeout{Setting the random seed to a \RANDOMSEED .}%
    \pgfmathsetseed{\number\RANDOMSEED}%
  }%
}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Science, Programming, Art and Radioelectronics Club\\(SPARC)}
\author{Artyom ``avp'' Poptsov\\\href{https://memory-heap.org}{memory-heap.org}}
\input{out/src/en/version.tex}

\begin{document}

\maketitle

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

%% TODO:

\subfile{sections/introduction.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Electronics}
\label{chapter:electronics}

%% TODO:
\subfile{sections/electronics-introduction.tex}
\subfile{sections/electronics-voltage}
\subfile{sections/electronics-circuits.tex}
\subfile{sections/electronics-potential-difference}
\subfile{sections/electronics-resistance}
\subfile{sections/electronics-building-circuits}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Dialogues with a Computer}
\label{chapter:dialogues-with-computer}

\subfile{sections/dialogues-with-computer-title-image}
\subfile{sections/dialogues-with-computer-introduction}
\subfile{sections/dialogues-with-computer-arduino}
\subfile{sections/dialogues-with-computer-breadboard}
\subfile{sections/dialogues-with-computer-multimeter}

\newpage
\subfile{sections/dialogues-with-computer-arduino-ide}
\subfile{sections/dialogues-with-computer-algorithms}
\subfile{sections/dialogues-with-computer-program-structure}
\subfile{sections/dialogues-with-computer-memory}
\subfile{sections/dialogues-with-computer-control-flow}
\subfile{sections/dialogues-with-computer-wokwi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{White noise}
\label{chapter:white-noise}

\subfile{sections/white-noise-introduction}
\subfile{sections/white-noise-signal-types}
\subfile{sections/white-noise-serial-port}
\subfile{sections/white-noise-analog-ports}
\subfile{sections/white-noise-adc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Pulse-Width Modulation}
\label{chapter:pwm}

\subfile{sections/pwm-intro}
\subfile{sections/pwm-wavelength}
\subfile{sections/pwm-duty-cycle}
\subfile{sections/pwm-tasks}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Music and Technology Synthesis}
\label{chapter:music-and-technology-synthesis}

\subfile{sections/music-and-technology-synthesis-sound}
\subfile{sections/music-and-technology-synthesis-speaker}
\subfile{sections/music-and-technology-synthesis-rhythm}
\subfile{sections/music-and-technology-synthesis-harmony}
\subfile{sections/music-and-technology-synthesis-octave-system}
\subfile{sections/music-and-technology-synthesis-simple-melodies}
\subfile{sections/music-and-technology-synthesis-arrays}
\subfile{sections/music-and-technology-synthesis-two-dimensional-arrays}
\subfile{sections/music-and-technology-synthesis-staff}
\subfile{sections/music-and-technology-synthesis-rest}
\subfile{sections/music-and-technology-synthesis-dotted-notes}
\subfile{sections/music-and-technology-synthesis-flats-and-sharps}
\subfile{sections/music-and-technology-synthesis-time-signature}
\subfile{sections/music-and-technology-synthesis-bass-clef}
\subfile{sections/music-and-technology-synthesis-music-band}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \chapter{Computer Language}
%% \label{chapter:computer-language}

%% TODO:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \chapter{Game Development}
%% \label{chapter:game-development}

%% TODO:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addcontentsline{toc}{chapter}{Index}
\printindex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addcontentsline{toc}{chapter}{Glossary}
\printglossaries

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addcontentsline{toc}{chapter}{Code listings}
\renewcommand\listoflistingscaption{Code listings}
\listoflistings

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\printbibliography[heading=bibintoc, title={Bibliography}]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix

\subfile{sections/appendix-octaves}
\subfile{sections/appendix-prostokvashino-score}
\subfile{sections/appendix-twinkle-twinkle-little-star-01}
\subfile{sections/appendix-twinkle-twinkle-little-star-02}

\end{document}
