\documentclass[../sparc.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Иррациональные ритмы}

В музыке иногда возникает необходимость создавать особое, ``иррациональное''
деление ритмических длительностей.  Самым распространённым способом создавить
подобные ритмы являются \emph{триоли}.

\emph{Триоль} -- это группа из трёх нот, которые занимают время, равное
длительности двух таких же нот.  Таким образом, каждая нота из группы
``ужимается'', чтобы дать место остальным.  Можно сказать, что триоль даёт
обратное действие нотам с точкой, которые мы обсуждали в предыдущем разделе
\ref{section:dotted-notes}.

\figureMusicTripletExample{ru}

Допустим, например, у нас есть отрывок из произведения ``Hey You'' под
авторством Pink Floyd, как показано на рис. \ref{fig:music-triplet-example}.  В
нём мы видим, что три первых ноты имеют длительность $\frac{1}{4}$, при этом они
объединены в триоль специальной линией, с цифрой ``3''.  Размер такта у нас
$\frac{4}{4}$ , то есть, единица.  Но если мы посчитаем фактическую сумму всех
длительностей нот в такте без учёта триоли, то получим большее значение:

\begin{equation}
  \mbox{Длина такта} = \frac{1}{4} + \frac{1}{4}
  + \frac{1}{4} + \frac{1}{8} + \frac{1}{4} + \frac{1}{8} = \frac{5}{4}
\end{equation}

Как видим, получилось $\frac{5}{4}$ -- что на $\frac{1}{4}$ больше единицы.

Чтобы правильно исполнить триоль, нам следует объединённые ей $\frac{3}{4}$
сократить так, чтобы они уместились по длительности в $\frac{2}{4}$ (что
эквивалентно $\frac{1}{2}$.)

Математически этого можно достичь, поделив общую длину нот на длину триоли:

\begin{equation}
  \mbox{Множитель} = \frac{3}{4} : \frac{2}{4} = \frac{3}{4} * \frac{4}{2}
  = \frac{3}{2} = 1.5
\end{equation}

Для деления дробей мы можем вместо деления умножить первую дробь на вторую, при
этом перевернув вторую.  Это позволит нам сократить дробь, убрав 4 в числителе и
знаметателе.  В итоге, у нас останется $\frac{3}{2}$.  Поделив 3 на 2 мы получим
значение 1.5 -- это и есть множитель, который мы должны применить к знаменателю
длительностей нот внутри триоли.

\begin{equation}
  \mbox{Длина ноты} = \frac{1}{4 * 1.5} = \frac{1}{6}
\end{equation}

Таким образом если мы вместо трёх нот по $\frac{1}{4}$ возьмём три ноты по
$\frac{1}{6}$, то их суммарная длительность как раз будет $\frac{2}{4}$.

\begin{equation}
  \mbox{Длина триоли} = \frac{1}{6} * 3 = \frac{3}{6} = \frac{1}{2}
  = \frac{2}{4}
\end{equation}

В свою очередь, сумма всех длительностей в такте будет равна единице:

\begin{equation}
  \mbox{Длина такта} = \frac{1}{6} + \frac{1}{6}
  + \frac{1}{6} + \frac{1}{8} + \frac{1}{4} + \frac{1}{8}
  = \frac{1}{1} = 1
\end{equation}

Запись мелодии в скрипичном ключе с учётом триоли будет выглядить следующим
образом:

\begin{minted}{cpp}
  float melody1[][2] = {
    {a4, 6}, {b4, 6}, {c5, 6}, {b4, 8}, {a4, 4}, {g4, 8}
  };
\end{minted}

\end{document}
