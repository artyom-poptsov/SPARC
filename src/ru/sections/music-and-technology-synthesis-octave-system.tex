\documentclass[../sparc.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Октавная система}
\index{Музыка!Октавная система}

Как вы, возможно, знаете, музыка строится из нот -- их всего семь: ``до'',
``ре'', ``ми'', ``фа'', ``соль'', ``ля'', ``си''. Каждой ноте соответствует
определённая частота. Но если мы с вами возьмём пианино (или синтезатор) и
посмотрим на его клавиатуру, то увидим, что клавиш на пианино гораздо больше,
чем нот.  Почему?

Оказывается, ноты объединяются в группы, которые называются \emph{октавами}. В
одной октаве семь нот (от ``до'' до ``си''), всего октав девять.

Для удобства мы пронумеруем все октавы от 0 (октава с самыми низкими частотами)
и до 8 (октава с самыми высокими частотами.)

Таким образом мы получаем $7 * 9 = 63$ разных нот\footnote{На самом деле, разных
звуков в октавной системе больше, чем нот -- об этом речь пойдёт чуть позже.} в
октавной системе.

Каким же образом ноты можно легко различить, если они называются одинаково и
различаются только номером октавы? Оказывается, для этого есть достаточно
удобная \emph{научная нотация} -- в таблице \ref{table:scientific-music-notation}
показано соответствие слоговых названий нот (``до'', ``ре'', ``ми'', ``фа'',
``соль'', ``ля'', ``си'') и обозначений в научной нотации.

\begin{tabular}{p{4cm}|p{4cm}}
  Слоговое обозначение & Научное обозначение \\
  \hline \hline
  До   & С \\
  \hline
  Ре   & D \\
  \hline
  Ми   & E \\
  \hline
  Фа   & F \\
  \hline
  Соль & G \\
  \hline
  Ля   & A \\
  \hline
  Си   & B (H) \\
  \hline
  \label{table:scientific-music-notation}
\end{tabular}

Обратите внимание, что нота ``Си'' может быть обозначена либо буквой ``B''
(английский вариант), либо буквой ``H'' (немецкий вариант.) Мы с вами будем
использовать только английский вариант и всегда записывать ``Си'' как ``B''.

Прелесть научной нотации не только в краткости записи нот (что удобно для их
программирования), но и в том, что после буквы обычно ставится цифра -- номер
октавы, к которой принадлежит нота. Например, ``C0'' -- то нота ``До'' нулевой
октавы, а нота ``G5'' -- это нота ``Соль'' пятой октавы.

Одинаковые ноты из разных октав различаются своей частотой звука -- причём, не
просто различаются ``как попало'', а согласно строгому правилу: они кратны друг
другу. Если взять ноту ``C0'' (``до'' нулевой октавы) и ``C1'' (``до'' первой
октавы), то их частоты будут различаться ровно в два раза.

Тут стоит вспомнить, что звуки, частоты которых различаются в кратное количество
раз, приятны нашему слуху. Бинго! Мы только что поняли небольшую частичку
музыкальной теории.

Если же мы хотим рассчитать частоту нот не из смежных октав, а допустим ноту
``C0'' и ноту ``C3'' из третьей октавы, то мы должны использовать более
``хитрую'' формулу. Дело в том, что каждая следующая октава повышает частоту
выбранной ноты ровно в два раза.

Формула вычисления частоты выбранной ноты из нулевой октавы в произвольной
октаве представлена ниже (\ref{equation:music-note-frequency-equation}.)

\begin{equation}
  f * 2^n
  \label{equation:music-note-frequency-equation}
\end{equation}

Где ``f'' -- это частота выбранной ноты нулевой октавы, а ``n'' -- то номер
октавы, начиная с нуля.

Возьмём с вами для сравнения нулевую и четвёртую по счёту октаву -- частоты нот
представлены в таблице \ref{table:fourth-octave} (полная таблица октав
представлена в \nameref{section:appendixA}.)

\begin{tabular}{p{2cm}|p{3cm}|p{2cm}|p{3cm}}
  № октавы & Слоговое обозначение & Научное обознечение & Частота (Гц) \\
  \hline \hline

  \multirow{7}{*}{0}
  \musicnote{0}{C}{16.352}
  \cline{2-4}
  \musicnote{0}{D}{18.354}
  \cline{2-4}
  \musicnote{0}{E}{20.602}
  \cline{2-4}
  \musicnote{0}{F}{21.827}
  \cline{2-4}
  \musicnote{0}{G}{24.500}
  \cline{2-4}
  \musicnote{0}{A}{27.500}
  \cline{2-4}
  \musicnote{0}{B}{30.868}
  \hline

  \multirow{7}{*}{4}
  \musicnote{4}{C}{261.630}
  \cline{2-4}
  \musicnote{4}{D}{293.660}
  \cline{2-4}
  \musicnote{4}{E}{329.630}
  \cline{2-4}
  \musicnote{4}{F}{349.230}
  \cline{2-4}
  \musicnote{4}{G}{392.000}
  \cline{2-4}
  \musicnote{4}{A}{440.000}
  \cline{2-4}
  \musicnote{4}{B}{493.880}
  \hline
  \label{table:fourth-octave}
\end{tabular}

Видно, что нота ``C0'' имеет частоту 16.352 Гц. Если мы подставим это значение в
формулу \ref{equation:music-note-frequency-equation}, то получим частоту ноты
``C4'' (см. формулу \ref{equation:music-note-frequency-equation-example}.)

\begin{equation}
  \mbox{C4} = f * 2^n = \mbox{C0} * 2^4 = 16.352\mbox{Гц} * 2^4 = 261.632\mbox{Гц}
  \label{equation:music-note-frequency-equation-example}
\end{equation}

С полученными знаниями мы теперь можем запрограммировать простую
мелодию, чем и займёмся в следующем разделе.

\end{document}
