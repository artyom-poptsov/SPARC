\documentclass[../sparc.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\newglossaryentry{UART}{name=UART, description={Universal Asynchronous
    Receiver-Transmitter}}

Вот и пришло время нам поговорить о том, как организовать общение
микроконтроллера со вспомогательными устройствами, и какой язык для этого будет
использоваться.  ``Разумеется!'' -- вы можете воскликнуть, -- ``Языком общения
машин являются нолики и единички, машинный код!''.  И вы будете правы, общение
компьютеров обычно сводится к передаче нулей и единиц.  Однако, кроме данного
``алфавита'' не менее важны ещё такие понятия, как \emph{среда передачи данных}
и \emph{протокол передачи данных}.

Средой передачи данных часто выступает одна из трёх сред: провод (например, как
в случае с проводом USB), радиоканал (Wi-Fi, Bluetooth) или же свет
(оптоволоконная передача данных.)  Компьютеры для коммуникации между собой могут
даже использовать звуковые волны, но это скорее исключение из правил.

Протокол передачи данных определяет собственно формат, в котором данные
передаются -- где начало и конец ``предложения'' и что является ``словами'' при
коммуникации.  Широко известным примером протокола может служить USB.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Классификация методов передачи данных}

\newglossaryentry{LPT}{name=LPT, description={Line Print Terminal}}

Передача данных между устройствами делится на две большие категории:

\begin{itemize}
\item \textbf{Параллельная передача данных} -- все биты посылки передаются
  единовременно (параллельно.)  Для этого устройства должны быть соединены
  шиной, в которой линий столько же, сколько бит в посылке.
\item \textbf{Последовательная передача данных} -- биты передаются
  последовательно, используя временн\'{о}е кодирование.  Для этого потенциально
  достаточно одной линии передачи данных (например, одного провода.) Фактически
  же для большинства подобных способов передачи данных используются две или
  более линий.
\end{itemize}

\figureProtocolClassification{ru}

Примером параллельной передачи данных является \emph{параллельный порт} (англ.
``parallel port''.) Обычно он в компьютерном мире ассоциируется с интерфейсом
Line Print Terminal (\gls{LPT}.)  В прошлом (c 1970-х по 2000-е года) подобные
порты использовались для подключения принтеров к компьютерам, и были крайне
популярны.  В современном мире LPT-порты практически не используются, будучи
вытесненными такими интерфейсами, как USB.

Преимуществом параллельного порта, как следует из его названия, является
возможность передавать сразу несколько бит единовременно, что ускоряет передачу
данных.  Например, в LPT-портах для передачи данных использовалось восемь линий
(не считая вспомогательных линий, вроде питания, общего провода и тактового
импульса), позволяя таким образом сразу передать 8 бит (1 байт) информации за
один такт.  К преимуществам параллельного порта также можно отнести простоту
реализации.  Тем не менее, важным (и во многих случаях решающим) недостатком
параллельного порта является громоздкость интерфейса подключения устройств из-за
большого количества проводов.  Поэтому мы будем подробно рассматривать только
последовательные интерфейсы передачи данных: \gls{UART} и I2C.

%% TODO: Добавить SPI.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Направление передачи данных}

Системы передачи данных можно поделить по направлению передачи данных на три
категории:

\begin{itemize}
\item \textbf{Симплекс} (лат. \emph{simplex}, односторонний) -- Однонаправленная
  коммуникация.  Симплексный канал передаёт данные только в одну сторону.
\item \textbf{Полудуплекс} (\emph{half-duplex}) -- Двунаправленная коммуникация.
  Соединённые устройства могут передавать данные в обе стороны, однако в каждый
  момент времени активным может быть только либо приёмник, либо передатчик.
  Примером подобных устройств является обычная рация.
\item \textbf{Дуплекс} (лат. \emph{duplex}, двусторонний), также иногда
  называемы ``full-duplex'' -- Двунаправленная передача данных.  Соединённые
  устройства могут одновременно и передавать, и принимать данные.  Примером
  является проводная линия телефоннной связи: оба собеседника могут говорить и
  слышать друг друга одновременно.
\end{itemize}

\gls{UART} -- один из последовательных интерфейсов, которые мы будем
рассматривать далее -- позволяет достаточно легко реализовать как сммплексный,
так и дуплексный режим коммуникации.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Синхронная и асинхронная коммуникация}

Последний способ классификации протоколов, который мы рассмотрим -- это
синхроанная и асинхронная передача данных.

\begin{itemize}
\item \textbf{Синхронная} коммуникация подразумевает наличие специального
  тактирующего сигнала, который синхронизирует два устройства.  Это подобно
  метроному в музыке, который синхронизирует части одной композиции, чтобы
  например удраные не ``обгоняли'' электро-гитару.  Когда участники музыкальной
  группы репетируют перед выступлением на концерте, часто именно метроном
  позволяет добиться слаженности исполнения.  В технике для тактирующего
  импульса как правило используется дополнительная линия в шине передачи данных.
  Как правило её называют SCK, CLK, CLOCK или тактирование.
\item \textbf{Асинхронная} коммуникация позволяет обходиться без тактирующего
  сигнала, однако устройства должны заранее договориться, с какой скоростью они
  будут передавать и принимать данные.  Проводя также аналогию с музыкой, если
  музыканты договорились о скорости исполнения каждой партии и провели
  достаточно репетиций, то они могут поддерживать нужный темп музыки без
  использования метронома.
\end{itemize}

В даной книге будут рассмотрены оба примера протоколов: \gls{UART} является
асинхронным, а \gls{I2C} -- синхронным.

%% TODO: SPI тоже синхронный.

\end{document}
